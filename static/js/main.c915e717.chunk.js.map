{"version":3,"sources":["logo.svg","components/objectDetector/index.jsx","App.jsx","reportWebVitals.js","index.jsx"],"names":["ObjectDetectorContainer","styled","div","_templateObject","_taggedTemplateLiteral","DetectorContainer","_templateObject2","TargetImg","img","_templateObject3","HiddenFileInput","input","_templateObject4","SelectButton","button","_templateObject5","TargetBox","_templateObject6","_ref","x","_ref2","y","_ref3","width","_ref4","height","_ref5","classType","score","concat","toFixed","ObjectDetector","props","fileInputRef","useRef","imageRef","_useState","useState","_useState2","_slicedToArray","imgData","setImgData","_useState3","_useState4","predictions","setPredictions","_useState5","_useState6","isLoading","setLoading","isEmptyPredictions","length","normalizePredictions","imgSize","map","prediction","bbox","oldX","oldY","oldWidth","oldHeight","imgWidth","current","imgHeight","_objectSpread","detectObjectsOnImage","_ref6","_asyncToGenerator","_regeneratorRuntime","mark","_callee","imageElement","model","normalizedPredictions","wrap","_context","prev","next","cocoSsd","sent","detect","console","log","stop","_x","_x2","apply","arguments","readImage","file","Promise","rs","rj","fileReader","FileReader","onload","result","onerror","error","readAsDataURL","onSelectImage","_ref7","_callee3","e","_context3","target","files","document","createElement","src","_callee2","_context2","_x3","_jsxs","children","_jsx","ref","idx","class","type","onChange","onClick","click","AppContainer","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","React","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c915e717.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React, { useRef, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport \"@tensorflow/tfjs-backend-cpu\";\n//import \"@tensorflow/tfjs-backend-webgl\";\nimport * as cocoSsd from \"@tensorflow-models/coco-ssd\";\n\nconst ObjectDetectorContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst DetectorContainer = styled.div`\n  min-width: 200px;\n  height: 700px;\n  border: 3px solid #fff;\n  border-radius: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n`;\n\nconst TargetImg = styled.img`\n  height: 100%;\n`;\n\nconst HiddenFileInput = styled.input`\n  display: none;\n`;\n\nconst SelectButton = styled.button`\n  padding: 7px 10px;\n  border: 2px solid transparent;\n  background-color: #fff;\n  color: #0a0f22;\n  font-size: 16px;\n  font-weight: 500;\n  outline: none;\n  margin-top: 2em;\n  cursor: pointer;\n  transition: all 260ms ease-in-out;\n\n  &:hover {\n    background-color: transparent;\n    border: 2px solid #fff;\n    color: #fff;\n  }\n`;\n\nconst TargetBox = styled.div`\n  position: absolute;\n\n  left: ${({ x }) => x + \"px\"};\n  top: ${({ y }) => y + \"px\"};\n  width: ${({ width }) => width + \"px\"};\n  height: ${({ height }) => height + \"px\"};\n\n  border: 4px solid #1ac71a;\n  background-color: transparent;\n  z-index: 20;\n\n  &::before {\n    content: \"${({ classType, score }) => `${classType} ${score.toFixed(1)}%`}\";\n    color: #1ac71a;\n    font-weight: 500;\n    font-size: 17px;\n    position: absolute;\n    top: -1.5em;\n    left: -5px;\n  }\n`;\n\nexport function ObjectDetector(props) {\n  const fileInputRef = useRef();\n  const imageRef = useRef();\n  const [imgData, setImgData] = useState(null);\n  const [predictions, setPredictions] = useState([]);\n  const [isLoading, setLoading] = useState(false);\n\n  const isEmptyPredictions = !predictions || predictions.length === 0;\n\n  const openFilePicker = () => {\n    if (fileInputRef.current) fileInputRef.current.click();\n  };\n\n  const normalizePredictions = (predictions, imgSize) => {\n    if (!predictions || !imgSize || !imageRef) return predictions || [];\n    return predictions.map((prediction) => {\n      const { bbox } = prediction;\n      const oldX = bbox[0];\n      const oldY = bbox[1];\n      const oldWidth = bbox[2];\n      const oldHeight = bbox[3];\n\n      const imgWidth = imageRef.current.width;\n      const imgHeight = imageRef.current.height;\n\n      const x = (oldX * imgWidth) / imgSize.width;\n      const y = (oldY * imgHeight) / imgSize.height;\n      const width = (oldWidth * imgWidth) / imgSize.width;\n      const height = (oldHeight * imgHeight) / imgSize.height;\n\n      return { ...prediction, bbox: [x, y, width, height] };\n    });\n  };\n\n  const detectObjectsOnImage = async (imageElement, imgSize) => {\n    const model = await cocoSsd.load({});\n    const predictions = await model.detect(imageElement, 6);\n    const normalizedPredictions = normalizePredictions(predictions, imgSize);\n    setPredictions(normalizedPredictions);\n    console.log(\"Predictions: \", predictions);\n  };\n\n  const readImage = (file) => {\n    return new Promise((rs, rj) => {\n      const fileReader = new FileReader();\n      fileReader.onload = () => rs(fileReader.result);\n      fileReader.onerror = () => rj(fileReader.error);\n      fileReader.readAsDataURL(file);\n    });\n  };\n\n  const onSelectImage = async (e) => {\n    setPredictions([]);\n    setLoading(true);\n\n    const file = e.target.files[0];\n    const imgData = await readImage(file);\n    setImgData(imgData);\n\n    const imageElement = document.createElement(\"img\");\n    imageElement.src = imgData;\n\n    imageElement.onload = async () => {\n      const imgSize = {\n        width: imageElement.width,\n        height: imageElement.height,\n      };\n      await detectObjectsOnImage(imageElement, imgSize);\n      setLoading(false);\n    };\n  };\n\n  return (\n    <ObjectDetectorContainer>\n      <DetectorContainer>\n        {imgData && <TargetImg src={imgData} ref={imageRef} />}\n        {!isEmptyPredictions &&\n          predictions.map((prediction, idx) => (\n            <TargetBox\n              key={idx}\n              x={prediction.bbox[0]}\n              y={prediction.bbox[1]}\n              width={prediction.bbox[2]}\n              height={prediction.bbox[3]}\n              classType={prediction.class}\n              score={prediction.score * 100}\n            />\n          ))}\n      </DetectorContainer>\n      <HiddenFileInput\n        type=\"file\"\n        ref={fileInputRef}\n        onChange={onSelectImage}\n      />\n      <SelectButton onClick={openFilePicker}>\n        {isLoading ? \"Recognizing...\" : \"Select Image\"}\n      </SelectButton>\n    </ObjectDetectorContainer>\n  );\n}\n","import logo from \"./logo.svg\";\nimport \"./App.css\";\nimport styled from \"styled-components\";\nimport { ObjectDetector } from \"./components/objectDetector\";\n\nconst AppContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  background-color: #1c2127;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n`;\n\nfunction App() {\n  return (\n    <AppContainer>\n      <ObjectDetector />\n    </AppContainer>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}